# Test fbd dep tree command
fbd init --prefix test

# Create issues and capture their hash IDs
fbd create 'Root issue'
cp stdout root.txt
exec sh -c 'grep -oE "test-[a-z0-9]+" root.txt > root_id.txt'

fbd create 'Child issue'
cp stdout child.txt
exec sh -c 'grep -oE "test-[a-z0-9]+" child.txt > child_id.txt'

# Add dependency: child depends on root
exec sh -c 'fbd dep add $(cat child_id.txt) $(cat root_id.txt)'

# Show dependency tree for root
exec sh -c 'fbd dep tree $(cat root_id.txt)'
stdout 'test-'
